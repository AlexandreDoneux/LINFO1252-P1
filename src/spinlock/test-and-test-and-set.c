// code for test-and-test-and-stet algorithm